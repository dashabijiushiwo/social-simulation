# 🚀 GitHub上传与Streamlit部署完整指南

## 📋 目录
1. [准备工作](#准备工作)
2. [GitHub上传](#github上传)
3. [Streamlit Cloud部署](#streamlit-cloud部署)
4. [验证部署](#验证部署)
5. [常见问题](#常见问题)

---

## 🛠️ 准备工作

### 检查文件结构
确保你的项目结构如下：
```
d:\social9.0/
├── README.md              # 项目说明
├── requirements.txt       # 依赖包列表
└── social9.0/            # 主要代码目录
    ├── .streamlit/
    │   └── config.toml   # Streamlit配置
    ├── core/             # 核心模拟引擎
    │   ├── agent.py
    │   ├── simulation.py
    │   └── society.py
    ├── ui/               # 用户界面组件
    │   ├── macro_dashboard.py
    │   ├── comparison_panel.py
    │   ├── elite_panel.py
    │   ├── config_panel.py
    │   └── rules_panel.py
    ├── main.py           # 主程序入口
    └── 使用说明.md
```

### 验证依赖文件
检查 `requirements.txt` 包含所有必要依赖：
```txt
streamlit>=1.28.0
numpy>=1.21.0
pandas>=1.3.0
plotly>=5.0.0
scipy>=1.7.0
networkx>=2.6
seaborn>=0.11.0
matplotlib>=3.4.0
scikit-learn>=1.0.0
validators>=0.20.0
protobuf
```

---

## 📤 GitHub上传

### 方法一：网页上传（推荐新手）

#### 1. 创建GitHub账号
- 访问 [https://github.com](https://github.com)
- 点击 "Sign up" 注册账号
- 验证邮箱地址

#### 2. 创建新仓库
1. 登录后点击右上角 "+" → "New repository"
2. 填写仓库信息：
   - **Repository name**: `social-simulation`
   - **Description**: `多维社会模拟系统 - 基于智能体的社会结构演化研究工具`
   - **Visibility**: ✅ Public（必须公开才能免费部署）
   - **Initialize**: ✅ Add a README file
3. 点击 "Create repository"

#### 3. 上传项目文件
1. 在仓库页面点击 "uploading an existing file"
2. 将以下文件/文件夹拖拽到上传区域：
   - 📁 `social9.0/` 整个文件夹
   - 📄 `requirements.txt`
   - 📄 `README.md`
   - 📄 `部署指南.md`（本文件）
3. 在页面底部填写提交信息：
   ```
   Initial commit: 多维社会模拟系统
   
   - 添加核心模拟引擎
   - 添加用户界面组件
   - 添加项目文档和部署指南
   ```
4. 点击 "Commit changes"

#### 4. 验证上传结果
确保仓库包含：
- ✅ `social9.0/main.py`
- ✅ `social9.0/core/` 目录及所有文件
- ✅ `social9.0/ui/` 目录及所有文件
- ✅ `requirements.txt`
- ✅ `README.md`

### 方法二：命令行上传（推荐有经验用户）

#### 前提条件
- 安装Git：[https://git-scm.com/download/win](https://git-scm.com/download/win)
- 配置Git用户信息：
  ```bash
  git config --global user.name "你的用户名"
  git config --global user.email "你的邮箱"
  ```

#### 上传步骤
```bash
# 1. 进入项目目录
cd d:\social9.0

# 2. 初始化Git仓库
git init

# 3. 添加远程仓库
git remote add origin https://github.com/你的用户名/social-simulation.git

# 4. 添加所有文件
git add .

# 5. 提交代码
git commit -m "Initial commit: 多维社会模拟系统"

# 6. 推送到GitHub
git branch -M main
git push -u origin main
```

---

## ☁️ Streamlit Cloud部署

### 1. 访问Streamlit Cloud
- 打开 [https://share.streamlit.io](https://share.streamlit.io)
- 点击 "Sign in with GitHub"
- 授权Streamlit访问你的GitHub账号

### 2. 创建新应用
1. 点击 "New app" 按钮
2. 填写部署配置：
   - **Repository**: 选择 `你的用户名/social-simulation`
   - **Branch**: `main`
   - **Main file path**: `social9.0/main.py`
   - **App URL**: 自定义应用网址（如：`my-social-sim`）

### 3. 高级设置（可选）
点击 "Advanced settings" 进行额外配置：
- **Python version**: `3.9`
- **Requirements file**: `requirements.txt`
- **Secrets**: 如有需要可添加环境变量

### 4. 开始部署
1. 点击 "Deploy!" 按钮
2. 等待部署过程（通常2-5分钟）
3. 观察部署日志，确保没有错误

### 5. 部署状态监控
部署过程中会显示：
- 🟡 **Building**: 正在构建环境
- 🟡 **Installing**: 正在安装依赖
- 🟢 **Running**: 部署成功，应用运行中
- 🔴 **Error**: 部署失败，需要检查日志

---

## ✅ 验证部署

### 1. 访问应用
部署成功后，你将获得一个网址：
```
https://你的应用名.streamlit.app
```

### 2. 功能测试
确保以下功能正常：
- ✅ 页面正常加载
- ✅ 侧边栏参数配置可用
- ✅ 模拟可以正常运行
- ✅ 图表正常显示
- ✅ 各个面板切换正常

### 3. 性能检查
- 页面加载时间 < 10秒
- 模拟运行响应及时
- 图表交互流畅

---

## 🔧 常见问题

### Q1: 部署失败，显示依赖安装错误
**解决方案**：
1. 检查 `requirements.txt` 格式是否正确
2. 确保所有包名和版本号正确
3. 移除可能冲突的包
4. 尝试指定具体版本号

**示例修复**：
```txt
# 错误写法
streamlit
numpy

# 正确写法
streamlit>=1.28.0
numpy>=1.21.0
```

### Q2: 应用启动后显示文件未找到
**解决方案**：
1. 确认主文件路径设置为 `social9.0/main.py`
2. 检查GitHub仓库中文件结构是否正确
3. 确保所有必要文件都已上传

### Q3: 应用运行缓慢或超时
**解决方案**：
1. 优化代码性能，减少计算量
2. 使用 `@st.cache_data` 缓存数据
3. 减少默认模拟规模
4. 异步处理长时间计算

### Q4: 图表显示异常
**解决方案**：
1. 检查Plotly版本兼容性
2. 确认数据格式正确
3. 添加异常处理代码

### Q5: GitHub上传文件过大
**解决方案**：
1. 删除不必要的缓存文件
2. 使用 `.gitignore` 忽略临时文件
3. 压缩大型数据文件

---

## 🎯 部署后优化

### 1. 自定义域名（可选）
- 购买域名
- 在Streamlit Cloud设置中配置CNAME
- 更新DNS记录

### 2. 应用监控
- 定期检查应用状态
- 监控访问日志
- 关注性能指标

### 3. 版本更新
- 推送代码到GitHub自动触发重新部署
- 使用分支管理不同版本
- 保持依赖包更新

### 4. 用户反馈
- 添加反馈收集机制
- 监控用户使用情况
- 根据反馈优化功能

---

## 🎉 部署完成

恭喜！你的多维社会模拟系统现在已经成功部署到云端。

**你的应用网址**：`https://你的应用名.streamlit.app`

**分享你的成果**：
- 📱 发送链接给朋友和同事
- 🐦 在社交媒体上分享
- 📝 添加到简历或作品集
- 🎓 用于学术演示和教学

**持续改进**：
- 收集用户反馈
- 添加新功能
- 优化性能
- 扩展应用场景

---

## 📞 获取帮助

如果遇到问题：
1. **查看部署日志**：在Streamlit Cloud控制台查看详细错误信息
2. **GitHub Issues**：在项目仓库创建Issue
3. **Streamlit文档**：[https://docs.streamlit.io](https://docs.streamlit.io)
4. **社区支持**：Streamlit社区论坛

**技术支持资源**：
- [Streamlit部署文档](https://docs.streamlit.io/streamlit-cloud)
- [GitHub使用指南](https://docs.github.com)
- [Python包管理](https://pip.pypa.io/en/stable/)

---

*最后更新：2024年1月*